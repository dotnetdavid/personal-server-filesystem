import { describe, it, expect } from 'vitest';
import { exec } from 'child_process';

describe('Network Infrastructure: Logs', () => {
  it('should find "[mcp-test] Client connected" in mcp-test container logs', async () => {
    await new Promise<void>((resolve, reject) => {
      // Fetch logs from the mcp-test container
      exec('docker logs mcp-test', (error, stdout, stderr) => {
        if (error) {
          reject(new Error(stderr || stdout));
        } else {
          // Look for the log line
          const found = stdout.includes('[mcp-test] Client connected');
          expect(found).toBe(true);
          resolve();
        }
      });
    });
  });
});